<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <title>Create Claim</title>
    <style>
        /* ... (previous styles remain unchanged) ... */

        .submit-button {
            background-color: #007BFF;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin-top: 1rem;
            align-self: flex-end;
        }

        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .popup-content {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
        }

        .popup-buttons {
            display: flex;
            justify-content: flex-end;
            margin-top: 1rem;
        }

        .popup-button {
            padding: 0.5rem 1rem;
            margin-left: 0.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .popup-button-confirm {
            background-color: #007BFF;
            color: white;
        }

        .popup-button-cancel {
            background-color: #f4f4f4;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="claim-container">
        <div class="container-content">
            <h1>Create Claim</h1>
            <form id="claimForm">
                <div class="form-group">
                    <label for="lecturerId">Lecturer ID</label>
                    <input type="number" id="lecturerId" name="lecturerId" required>
                </div>
                <div class="form-group">
                    <label for="hoursWorked">Total Hours Worked</label>
                    <input type="number" id="hoursWorked" name="hoursWorked" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="amountDue">Amount Due</label>
                    <input type="number" id="amountDue" name="amountDue" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="moduleCode">Module Code</label>
                    <select id="moduleCode" name="moduleCode" required>
                        <option value="PROG6111">PROG6111</option>
                        <option value="PROG6222">PROG6222</option>
                        <option value="CLDV6212">CLDV6212</option>
                        <option value="ADDB7311">ADDB7311</option>
                        <option value="CLDV5111">CLDV5111</option>
                        <option value="MPFD5622">MPFD5622</option>
                        <option value="SOEN6212">SOEN6212</option>
                        <option value="HETC7331">HETC7331</option>
                        <option value="FDAB6221">FDAB6221</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" required></textarea>
                </div>
                <div class="form-group">
                    <label for="supportingImages">Supporting Images</label>
                    <input type="file" id="supportingImages" name="supportingImages" multiple>
                </div>
                <button type="submit" class="submit-button">Submit</button>
            </form>
        </div>
        <!-- ... (calendar container remains unchanged) ... -->
        <div class="calendar-container">
            <div class="calendar">
                <div class="calendar-header">
                    <span class="calendar-nav calendar-prev">&#9664;</span>
                    <span class="calendar-month">September 2024</span>
                    <span class="calendar-nav calendar-next">&#9654;</span>
                </div>
                <div class="calendar-days">
                    <div class="calendar-day">Sun</div>
                    <div class="calendar-day">Mon</div>
                    <div class="calendar-day">Tue</div>
                    <div class="calendar-day">Wed</div>
                    <div class="calendar-day">Thu</div>
                    <div class="calendar-day">Fri</div>
                    <div class="calendar-day">Sat</div>
                    <!-- Days of the month -->
                    <div class="calendar-date"></div>
                    <div class="calendar-date"></div>
                    <div class="calendar-date">1</div>
                    <div class="calendar-date">2</div>
                    <div class="calendar-date">3</div>
                    <div class="calendar-date">4</div>
                    <div class="calendar-date">5</div>
                    <div class="calendar-date">6</div>
                    <div class="calendar-date">7</div>
                    <div class="calendar-date">8</div>
                    <div class="calendar-date">9</div>
                    <div class="calendar-date">10</div>
                    <div class="calendar-date">11</div>
                    <div class="calendar-date">12</div>
                    <div class="calendar-date">13</div>
                    <div class="calendar-date">14</div>
                    <div class="calendar-date">15</div>
                    <div class="calendar-date">16</div>
                    <div class="calendar-date">17</div>
                    <div class="calendar-date">18</div>
                    <div class="calendar-date">19</div>
                    <div class="calendar-date">20</div>
                    <div class="calendar-date">21</div>
                    <div class="calendar-date">22</div>
                    <div class="calendar-date">23</div>
                    <div class="calendar-date">24</div>
                    <div class="calendar-date">25</div>
                    <div class="calendar-date">26</div>
                    <div class="calendar-date">27</div>
                    <div class="calendar-date">28</div>
                    <div class="calendar-date">29</div>
                    <div class="calendar-date">30</div>
                </div>
            </div>
        </div>
    </div>

    <div id="popupOverlay" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h2>Confirm Claim Submission</h2>
            <div id="popupData"></div>
            <div class="popup-buttons">
                <button class="popup-button popup-button-cancel" onclick="closePopup()">Cancel</button>
                <button class="popup-button popup-button-confirm" onclick="submitClaim()">Confirm</button>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('claimForm').addEventListener('submit', function (e) {
            e.preventDefault();
            showPopup();
        });

        function showPopup() {
            const formData = new FormData(document.getElementById('claimForm'));
            let popupContent = '<ul>';
            for (let [key, value] of formData.entries()) {
                if (key !== 'supportingImages') {
                    popupContent += `<li><strong>${key}:</strong> ${value}</li>`;
                }
            }
            popupContent += '</ul>';
            document.getElementById('popupData').innerHTML = popupContent;
            document.getElementById('popupOverlay').style.display = 'flex';
        }

        function closePopup() {
            document.getElementById('popupOverlay').style.display = 'none';
        }

        function submitClaim() {
            const formData = new FormData(document.getElementById('claimForm'));
            fetch('/Claim/Create', {
                method: 'POST',
                body: formData
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Claim submitted successfully!');
                        document.getElementById('claimForm').reset();
                    } else {
                        alert('Error submitting claim. Please try again.');
                    }
                    closePopup();
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred. Please try again.');
                    closePopup();
                });
        }

        // ... (previous scripts for login notification and calendar remain unchanged) ...
        document.addEventListener("DOMContentLoaded", function () {
            var notification = document.getElementById("loginNotification");
            notification.style.opacity = 1;
            setTimeout(function () {
                notification.style.opacity = 0;
            }, 3000);
        });

        document.addEventListener("DOMContentLoaded", function () {
            const today = new Date();
            const currentMonth = today.getMonth();
            const currentYear = today.getFullYear();
            const currentDate = today.getDate();

            document.querySelector(".calendar-month").textContent = `${today.toLocaleString('default', { month: 'long' })} ${currentYear}`;

            document.querySelectorAll(".calendar-date").forEach(dateElem => {
                if (dateElem.textContent == currentDate) {
                    dateElem.classList.add("current");
                }
            });
        });

    </script>
</body>
</html>